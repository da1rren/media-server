{
	dynamic_dns {
		provider cloudflare {env.CF_API_TOKEN}
		versions ipv4

		domains {
			loveand.coffee jellyfin
		}
	}
}

jellyfin.loveand.coffee {
	tls {
		resolvers 1.1.1.1
		dns cloudflare {env.CF_API_TOKEN}
	}

	reverse_proxy :8096
}

torrent.loveand.coffee {
	@isPrivate remote_ip private_ranges

	tls {
		resolvers 1.1.1.1
		dns cloudflare {env.CF_API_TOKEN}
	}

	handle @isPrivate {
		reverse_proxy :8080
	}

	handle {
		respond @denied "Nope" 403
	}
}

pi.loveand.coffee {
	@isPrivate remote_ip private_ranges

	tls {
		resolvers 1.1.1.1
		dns cloudflare {env.CF_API_TOKEN}
	}
    
	handle @isPrivate {
		rewrite * /admin{uri}
		reverse_proxy pi.hole:80
	}

	handle {
		respond @denied "Nope" 403
	}
}
