{
	dynamic_dns {
		provider cloudflare {env.CF_API_TOKEN}
		versions ipv4

		domains {
			loveand.coffee jellyfin
		}
	}
}

jellyfin.loveand.coffee {
	tls {
		resolvers 1.1.1.1
		dns cloudflare {env.CF_API_TOKEN}
	}

	reverse_proxy :8096
}

torrent.loveand.coffee {
	tls {
		resolvers 1.1.1.1
		dns cloudflare {env.CF_API_TOKEN}
	}

    @denied not remote_ip private_ranges 100.64.0.0/10
    abort @denied
	reverse_proxy :8080
}

pi.loveand.coffee {
	tls {
		resolvers 1.1.1.1
		dns cloudflare {env.CF_API_TOKEN}
	}

    @denied not remote_ip private_ranges 100.64.0.0/10    
    abort @denied
	rewrite * /admin{uri}
	reverse_proxy pi.hole:80
}
